import{d as gt,a as i,r as wt,c as xt,l as bt,b as d,m as St,o as Vt,f as e,w as o,g as n,j as s,t as c,v as Ct,s as Pt,_ as jt}from"./index-ChimEHM8.js";import{f as It}from"./format-sbWH3_uq.js";const ht={class:"d-flex align-center justify-space-between"},Rt={class:"d-flex gap-2"},qt={class:"d-flex align-center"},At={class:"mr-4"},Tt={class:"text-h4 font-weight-bold white--text mb-1"},Ut={class:"d-flex align-center"},Ot={class:"mr-4"},zt={class:"text-h4 font-weight-bold white--text mb-1"},Dt={class:"d-flex align-center"},Lt={class:"mr-4"},Mt={class:"text-h4 font-weight-bold white--text mb-1"},Bt={class:"d-flex align-center"},Nt={class:"mr-4"},$t={class:"text-h4 font-weight-bold white--text mb-1"},Ht={class:"d-flex flex-column"},Et={class:"font-weight-medium"},Ft={class:"text-caption text-medium-emphasis"},Qt={class:"text-body-2"},Jt={class:"text-body-2 mb-4"},Gt=gt({__name:"InventoryView",setup(Yt){const h=i(!1),R=i(!1),q=i(!1),f=i(""),_=i(""),y=i(""),E=i(10),O=i([{key:"stock_quantity",order:"asc"}]),z=i([!0]),k=i(!1),g=i(!1),v=i(null),S=i("add"),V=i(0),C=i(""),w=i(0),D=i([]),x=wt({totalProducts:0,inStock:0,lowStock:0,outOfStock:0}),F=i(["Electronics","Clothing","Home & Garden","Sports","Books"]),Q=i([{title:"In Stock",value:"in_stock"},{title:"Low Stock",value:"low_stock"},{title:"Out of Stock",value:"out_of_stock"}]),J=i([{title:"Add Stock",value:"add"},{title:"Remove Stock",value:"remove"},{title:"Set to Specific Amount",value:"set"}]),G=[{title:"Image",key:"image",width:"80px",sortable:!1},{title:"Product",key:"name",width:"250px"},{title:"Category",key:"category",width:"120px"},{title:"Stock",key:"stock_quantity",width:"100px"},{title:"Reorder Point",key:"reorder_point",width:"120px"},{title:"Last Updated",key:"last_updated",width:"150px"},{title:"Actions",key:"actions",width:"80px",sortable:!1}],Y=xt(()=>{let a=D.value;if(f.value){const t=f.value.toLowerCase();a=a.filter(u=>u.name.toLowerCase().includes(t)||u.sku.toLowerCase().includes(t))}return _.value&&(a=a.filter(t=>t.category===_.value)),y.value&&(a=a.filter(t=>{switch(y.value){case"in_stock":return t.stock_quantity>(t.reorder_point||10);case"low_stock":return t.stock_quantity>0&&t.stock_quantity<=(t.reorder_point||10);case"out_of_stock":return t.stock_quantity===0;default:return!0}})),a}),K=[a=>a>0||"Quantity must be greater than 0"],W=[a=>a>=0||"Reorder point must be positive"],X=a=>a===0?"error":a<=10?"warning":"success",Z=a=>It(new Date(a),"MMM dd, yyyy HH:mm"),tt=(()=>{let a;return()=>{clearTimeout(a),a=setTimeout(()=>{},300)}})(),L=()=>{},et=()=>{f.value="",_.value="",y.value=""},ot=a=>{O.value=a.sortBy,z.value=a.sortDesc},lt=a=>{console.log("View product:",a.id)},at=a=>{v.value=a,S.value="add",V.value=0,C.value="",k.value=!0},nt=async()=>{if(v.value)try{R.value=!0,(await fetch("/api/inventory/adjust",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:v.value.id,type:S.value,quantity:V.value,reason:C.value})})).ok&&(k.value=!1,await M())}catch(a){console.error("Failed to adjust stock:",a)}finally{R.value=!1}},st=a=>{v.value=a,w.value=a.reorder_point||10,g.value=!0},dt=async()=>{if(v.value)try{q.value=!0,(await fetch("/api/inventory/reorder-point",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:v.value.id,reorderPoint:w.value})})).ok&&(g.value=!1,v.value.reorder_point=w.value)}catch(a){console.error("Failed to set reorder point:",a)}finally{q.value=!1}},it=a=>{console.log("View stock history for:",a.id)},rt=()=>{console.log("Add stock to multiple products")},ut=()=>{console.log("Export inventory data")},M=async()=>{try{h.value=!0;const t=await(await fetch("/api/inventory")).json();t.success&&(D.value=t.data.inventory,Object.assign(x,t.data.stats))}catch(a){console.error("Failed to load inventory:",a)}finally{h.value=!1}};return bt(()=>{M()}),(a,t)=>{const u=d("v-btn"),r=d("v-col"),P=d("v-row"),m=d("v-icon"),p=d("v-card"),A=d("v-text-field"),T=d("v-select"),ct=d("v-img"),vt=d("v-avatar"),mt=d("v-chip"),j=d("v-list-item-title"),I=d("v-list-item"),pt=d("v-divider"),ft=d("v-list"),_t=d("v-menu"),yt=d("v-data-table"),U=d("v-card-text"),B=d("v-card-title"),kt=d("v-textarea"),N=d("v-spacer"),$=d("v-card-actions"),H=d("v-dialog");return Vt(),St("div",null,[e(P,{class:"mb-6"},{default:o(()=>[e(r,{cols:"12"},{default:o(()=>[n("div",ht,[t[13]||(t[13]=n("div",null,[n("h1",{class:"text-h4 font-weight-bold mb-2"},"Inventory"),n("p",{class:"text-body-1 text-medium-emphasis"}," Monitor and manage your product stock levels ")],-1)),n("div",Rt,[e(u,{color:"primary","prepend-icon":"mdi-plus",onClick:rt},{default:o(()=>[...t[11]||(t[11]=[s(" Add Stock ",-1)])]),_:1}),e(u,{variant:"outlined","prepend-icon":"mdi-download",onClick:ut},{default:o(()=>[...t[12]||(t[12]=[s(" Export ",-1)])]),_:1})])])]),_:1})]),_:1}),e(P,{class:"mb-6"},{default:o(()=>[e(r,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(p,{class:"dashboard-card stats-gradient-primary pa-6"},{default:o(()=>[n("div",qt,[n("div",At,[e(m,{size:"48",color:"white"},{default:o(()=>[...t[14]||(t[14]=[s("mdi-package-variant",-1)])]),_:1})]),n("div",null,[n("div",Tt,c(x.totalProducts),1),t[15]||(t[15]=n("div",{class:"text-caption white--text opacity-8"},"Total Products",-1))])])]),_:1})]),_:1}),e(r,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(p,{class:"dashboard-card stats-gradient-success pa-6"},{default:o(()=>[n("div",Ut,[n("div",Ot,[e(m,{size:"48",color:"white"},{default:o(()=>[...t[16]||(t[16]=[s("mdi-check-circle",-1)])]),_:1})]),n("div",null,[n("div",zt,c(x.inStock),1),t[17]||(t[17]=n("div",{class:"text-caption white--text opacity-8"},"In Stock",-1))])])]),_:1})]),_:1}),e(r,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(p,{class:"dashboard-card stats-gradient-warning pa-6"},{default:o(()=>[n("div",Dt,[n("div",Lt,[e(m,{size:"48",color:"white"},{default:o(()=>[...t[18]||(t[18]=[s("mdi-alert",-1)])]),_:1})]),n("div",null,[n("div",Mt,c(x.lowStock),1),t[19]||(t[19]=n("div",{class:"text-caption white--text opacity-8"},"Low Stock",-1))])])]),_:1})]),_:1}),e(r,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(p,{class:"dashboard-card stats-gradient-error pa-6"},{default:o(()=>[n("div",Bt,[n("div",Nt,[e(m,{size:"48",color:"white"},{default:o(()=>[...t[20]||(t[20]=[s("mdi-cancel",-1)])]),_:1})]),n("div",null,[n("div",$t,c(x.outOfStock),1),t[21]||(t[21]=n("div",{class:"text-caption white--text opacity-8"},"Out of Stock",-1))])])]),_:1})]),_:1})]),_:1}),e(P,{class:"mb-6"},{default:o(()=>[e(r,{cols:"12",md:"4"},{default:o(()=>[e(A,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=l=>f.value=l),label:"Search products","prepend-inner-icon":"mdi-magnify",variant:"outlined",clearable:"",onInput:Ct(tt)},null,8,["modelValue","onInput"])]),_:1}),e(r,{cols:"12",md:"3"},{default:o(()=>[e(T,{modelValue:_.value,"onUpdate:modelValue":[t[1]||(t[1]=l=>_.value=l),L],items:F.value,label:"Category",variant:"outlined",clearable:""},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"12",md:"3"},{default:o(()=>[e(T,{modelValue:y.value,"onUpdate:modelValue":[t[2]||(t[2]=l=>y.value=l),L],items:Q.value,label:"Stock Status",variant:"outlined",clearable:""},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"12",md:"2"},{default:o(()=>[e(u,{color:"secondary",variant:"outlined",block:"",onClick:et},{default:o(()=>[...t[22]||(t[22]=[s(" Clear ",-1)])]),_:1})]),_:1})]),_:1}),e(p,{class:"dashboard-card"},{default:o(()=>[e(U,null,{default:o(()=>[e(yt,{headers:G,items:Y.value,"items-per-page":E.value,loading:h.value,density:"compact",class:"transparent-table","sort-by":O.value,"sort-desc":z.value,"onUpdate:options":ot},{"item.image":o(({item:l})=>[e(vt,{size:"40"},{default:o(()=>[e(ct,{src:l.image||"/placeholder-product.png",alt:l.name},null,8,["src","alt"])]),_:2},1024)]),"item.name":o(({item:l})=>[n("div",Ht,[n("span",Et,c(l.name),1),n("span",Ft,c(l.sku),1)])]),"item.stock_quantity":o(({item:l})=>[e(mt,{color:X(l.stock_quantity),size:"small",variant:"flat"},{default:o(()=>[s(c(l.stock_quantity),1)]),_:2},1032,["color"])]),"item.reorder_point":o(({item:l})=>[n("span",Qt,c(l.reorder_point||"N/A"),1)]),"item.last_updated":o(({item:l})=>[s(c(Z(l.last_updated)),1)]),"item.actions":o(({item:l})=>[e(_t,null,{activator:o(({props:b})=>[e(u,Pt({icon:"",size:"small",variant:"text"},b),{default:o(()=>[e(m,null,{default:o(()=>[...t[23]||(t[23]=[s("mdi-dots-vertical",-1)])]),_:1})]),_:1},16)]),default:o(()=>[e(ft,null,{default:o(()=>[e(I,{onClick:b=>lt(l)},{prepend:o(()=>[e(m,null,{default:o(()=>[...t[24]||(t[24]=[s("mdi-eye",-1)])]),_:1})]),default:o(()=>[e(j,null,{default:o(()=>[...t[25]||(t[25]=[s("View Product",-1)])]),_:1})]),_:1},8,["onClick"]),e(I,{onClick:b=>at(l)},{prepend:o(()=>[e(m,null,{default:o(()=>[...t[26]||(t[26]=[s("mdi-plus-minus",-1)])]),_:1})]),default:o(()=>[e(j,null,{default:o(()=>[...t[27]||(t[27]=[s("Adjust Stock",-1)])]),_:1})]),_:1},8,["onClick"]),e(I,{onClick:b=>st(l)},{prepend:o(()=>[e(m,null,{default:o(()=>[...t[28]||(t[28]=[s("mdi-tune",-1)])]),_:1})]),default:o(()=>[e(j,null,{default:o(()=>[...t[29]||(t[29]=[s("Set Reorder Point",-1)])]),_:1})]),_:1},8,["onClick"]),e(pt),e(I,{onClick:b=>it(l)},{prepend:o(()=>[e(m,null,{default:o(()=>[...t[30]||(t[30]=[s("mdi-history",-1)])]),_:1})]),default:o(()=>[e(j,null,{default:o(()=>[...t[31]||(t[31]=[s("Stock History",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["items","items-per-page","loading","sort-by","sort-desc"])]),_:1})]),_:1}),e(H,{modelValue:k.value,"onUpdate:modelValue":t[7]||(t[7]=l=>k.value=l),"max-width":"500"},{default:o(()=>[e(p,null,{default:o(()=>[e(B,{class:"text-h6"},{default:o(()=>{var l;return[s(" Adjust Stock - "+c((l=v.value)==null?void 0:l.name),1)]}),_:1}),e(U,null,{default:o(()=>[e(P,null,{default:o(()=>[e(r,{cols:"12"},{default:o(()=>{var l;return[n("div",Jt,[t[32]||(t[32]=s(" Current stock: ",-1)),n("strong",null,c((l=v.value)==null?void 0:l.stock_quantity),1)])]}),_:1}),e(r,{cols:"12",md:"6"},{default:o(()=>[e(T,{modelValue:S.value,"onUpdate:modelValue":t[3]||(t[3]=l=>S.value=l),items:J.value,label:"Adjustment Type",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"12",md:"6"},{default:o(()=>[e(A,{modelValue:V.value,"onUpdate:modelValue":t[4]||(t[4]=l=>V.value=l),modelModifiers:{number:!0},label:"Quantity",type:"number",variant:"outlined",rules:K},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:o(()=>[e(kt,{modelValue:C.value,"onUpdate:modelValue":t[5]||(t[5]=l=>C.value=l),label:"Reason (optional)",variant:"outlined",rows:"2"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e($,null,{default:o(()=>[e(N),e(u,{variant:"text",onClick:t[6]||(t[6]=l=>k.value=!1)},{default:o(()=>[...t[33]||(t[33]=[s("Cancel",-1)])]),_:1}),e(u,{color:"primary",variant:"text",onClick:nt,loading:R.value},{default:o(()=>[...t[34]||(t[34]=[s(" Adjust Stock ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(H,{modelValue:g.value,"onUpdate:modelValue":t[10]||(t[10]=l=>g.value=l),"max-width":"400"},{default:o(()=>[e(p,null,{default:o(()=>[e(B,{class:"text-h6"},{default:o(()=>[...t[35]||(t[35]=[s("Set Reorder Point",-1)])]),_:1}),e(U,null,{default:o(()=>[e(A,{modelValue:w.value,"onUpdate:modelValue":t[8]||(t[8]=l=>w.value=l),modelModifiers:{number:!0},label:"Reorder Point",type:"number",variant:"outlined",rules:W,hint:"You'll be notified when stock falls below this level"},null,8,["modelValue"])]),_:1}),e($,null,{default:o(()=>[e(N),e(u,{variant:"text",onClick:t[9]||(t[9]=l=>g.value=!1)},{default:o(()=>[...t[36]||(t[36]=[s("Cancel",-1)])]),_:1}),e(u,{color:"primary",variant:"text",onClick:dt,loading:q.value},{default:o(()=>[...t[37]||(t[37]=[s(" Set Point ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Xt=jt(Gt,[["__scopeId","data-v-b413775c"]]);export{Xt as default};
