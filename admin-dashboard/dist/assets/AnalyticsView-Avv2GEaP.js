import{C as Z,a as H,L as J,P as K,b as W,p as X,c as tt,d as et,A as at,e as G,D as st}from"./index-fKZwiHeB.js";import{d as ot,a as r,r as lt,l as nt,b as d,m as A,o as T,f as e,w as s,g as a,j as v,s as it,z as dt,v as x,t as c,F as rt,n as ct,_ as ut}from"./index-ChimEHM8.js";import{f as mt}from"./format-sbWH3_uq.js";const pt={class:"d-flex align-center justify-space-between"},vt={class:"d-flex align-center"},_t={class:"mr-4"},ft={class:"text-h4 font-weight-bold white--text mb-1"},ht={class:"text-caption white--text opacity-6"},gt={class:"d-flex align-center"},bt={class:"mr-4"},xt={class:"text-h4 font-weight-bold white--text mb-1"},wt={class:"text-caption white--text opacity-6"},yt={class:"d-flex align-center"},Dt={class:"mr-4"},Ct={class:"text-h4 font-weight-bold white--text mb-1"},kt={class:"text-caption white--text opacity-6"},Vt={class:"d-flex align-center"},Ot={class:"mr-4"},St={class:"text-h4 font-weight-bold white--text mb-1"},At={class:"text-caption white--text opacity-6"},Tt={class:"chart-container"},Lt={class:"d-flex align-center justify-space-between mb-2"},Rt={class:"flex-grow-1"},Pt={class:"text-body-2 font-weight-medium"},jt={class:"text-caption text-medium-emphasis"},Gt={class:"text-right"},Ft={class:"text-body-2 font-weight-bold"},zt={class:"chart-container"},Et={class:"chart-container"},It=ot({__name:"AnalyticsView",setup(Mt){Z.register(H,J,K,W,X,tt,et,at);const w=r(!1),y=r(!1),p=r([]),D=r("30d"),L=r("revenue"),F=r([{title:"Last 7 days",value:"7d"},{title:"Last 30 days",value:"30d"},{title:"Last 90 days",value:"90d"},{title:"Last year",value:"1y"}]),z=r([{title:"Revenue",value:"revenue"},{title:"Orders",value:"orders"},{title:"Customers",value:"customers"}]),u=lt({totalOrders:0,totalRevenue:0,totalCustomers:0,averageOrderValue:0,orderGrowth:0,revenueGrowth:0,customerGrowth:0,aovGrowth:0}),_=r([]),C=r({labels:[],datasets:[{label:"Revenue",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]}),k=r({labels:[],datasets:[{label:"New Customers",data:[],borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!0}]}),R=r({labels:["Pending","Processing","Shipped","Delivered","Cancelled"],datasets:[{data:[12,8,15,25,2],backgroundColor:["#fbbf24","#3b82f6","#8b5cf6","#10b981","#ef4444"]}]}),E={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:o=>`€${o.parsed.y.toLocaleString()}`}}},scales:{y:{beginAtZero:!0,ticks:{callback:o=>`€${o.toLocaleString()}`}}}},I={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}},M={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}},V=computed(()=>p.value.length===2?p.value.map(o=>mt(new Date(o),"MMM dd, yyyy")).join(" - "):"Select date range"),P=()=>{const o=new Date;let t=new Date;switch(D.value){case"7d":t.setDate(o.getDate()-7);break;case"30d":t.setDate(o.getDate()-30);break;case"90d":t.setDate(o.getDate()-90);break;case"1y":t.setFullYear(o.getFullYear()-1);break}p.value=[t.toISOString().split("T")[0],o.toISOString().split("T")[0]],O()},B=()=>{y.value=!1,O()},O=async()=>{try{w.value=!0;const o=localStorage.getItem("auth_token"),t=p.value[0]||new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],f=p.value[1]||new Date().toISOString().split("T")[0],n=await(await fetch(`/api/analytics/comprehensive?startDate=${t}&endDate=${f}`,{headers:{Authorization:o?`Bearer ${o}`:"","Content-Type":"application/json"}})).json();n.success&&(Object.assign(u,n.data.metrics),_.value=n.data.topProducts,C.value.labels=n.data.revenueChart.labels,C.value.datasets[0].data=n.data.revenueChart.data,k.value.labels=n.data.customerChart.labels,k.value.datasets[0].data=n.data.customerChart.data,R.value.datasets[0].data=n.data.statusDistribution)}catch(o){console.error("Failed to load analytics data:",o)}finally{w.value=!1}},N=()=>{O()},U=()=>{console.log("Export analytics data")};return nt(()=>{P()}),(o,t)=>{const f=d("v-btn"),i=d("v-col"),n=d("v-row"),$=d("v-text-field"),q=d("v-date-picker"),Q=d("v-menu"),j=d("v-select"),h=d("v-icon"),m=d("v-card"),g=d("v-card-title"),b=d("v-card-text"),Y=d("v-progress-linear");return T(),A("div",null,[e(n,{class:"mb-6"},{default:s(()=>[e(i,{cols:"12"},{default:s(()=>[a("div",pt,[t[6]||(t[6]=a("div",null,[a("h1",{class:"text-h4 font-weight-bold mb-2"},"Analytics"),a("p",{class:"text-body-1 text-medium-emphasis"}," Comprehensive insights into your business performance ")],-1)),e(f,{color:"primary","prepend-icon":"mdi-download",onClick:U},{default:s(()=>[...t[5]||(t[5]=[v(" Export Report ",-1)])]),_:1})])]),_:1})]),_:1}),e(n,{class:"mb-6"},{default:s(()=>[e(i,{cols:"12",md:"4"},{default:s(()=>[e(Q,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=l=>y.value=l),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:s(({props:l})=>[e($,it({modelValue:x(V),"onUpdate:modelValue":t[0]||(t[0]=S=>dt(V)?V.value=S:null),label:"Date range","prepend-inner-icon":"mdi-calendar",variant:"outlined",readonly:""},l),null,16,["modelValue"])]),default:s(()=>[e(q,{modelValue:p.value,"onUpdate:modelValue":[t[1]||(t[1]=l=>p.value=l),B],range:""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"4"},{default:s(()=>[e(j,{modelValue:D.value,"onUpdate:modelValue":[t[3]||(t[3]=l=>D.value=l),P],items:F.value,label:"Quick select",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"4"},{default:s(()=>[e(f,{color:"secondary",variant:"outlined",block:"",onClick:N,loading:w.value},{default:s(()=>[...t[7]||(t[7]=[v(" Refresh Data ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),e(n,{class:"mb-6"},{default:s(()=>[e(i,{cols:"12",sm:"6",md:"3"},{default:s(()=>[e(m,{class:"dashboard-card stats-gradient-primary pa-6"},{default:s(()=>[a("div",vt,[a("div",_t,[e(h,{size:"48",color:"white"},{default:s(()=>[...t[8]||(t[8]=[v("mdi-shopping",-1)])]),_:1})]),a("div",null,[a("div",ft,c(u.totalOrders),1),t[9]||(t[9]=a("div",{class:"text-caption white--text opacity-8"},"Total Orders",-1)),a("div",ht," +"+c(u.orderGrowth)+"% from last period ",1)])])]),_:1})]),_:1}),e(i,{cols:"12",sm:"6",md:"3"},{default:s(()=>[e(m,{class:"dashboard-card stats-gradient-success pa-6"},{default:s(()=>[a("div",gt,[a("div",bt,[e(h,{size:"48",color:"white"},{default:s(()=>[...t[10]||(t[10]=[v("mdi-currency-eur",-1)])]),_:1})]),a("div",null,[a("div",xt," €"+c(u.totalRevenue.toLocaleString()),1),t[11]||(t[11]=a("div",{class:"text-caption white--text opacity-8"},"Total Revenue",-1)),a("div",wt," +"+c(u.revenueGrowth)+"% from last period ",1)])])]),_:1})]),_:1}),e(i,{cols:"12",sm:"6",md:"3"},{default:s(()=>[e(m,{class:"dashboard-card stats-gradient-warning pa-6"},{default:s(()=>[a("div",yt,[a("div",Dt,[e(h,{size:"48",color:"white"},{default:s(()=>[...t[12]||(t[12]=[v("mdi-account-group",-1)])]),_:1})]),a("div",null,[a("div",Ct,c(u.totalCustomers),1),t[13]||(t[13]=a("div",{class:"text-caption white--text opacity-8"},"Total Customers",-1)),a("div",kt," +"+c(u.customerGrowth)+"% from last period ",1)])])]),_:1})]),_:1}),e(i,{cols:"12",sm:"6",md:"3"},{default:s(()=>[e(m,{class:"dashboard-card stats-gradient-info pa-6"},{default:s(()=>[a("div",Vt,[a("div",Ot,[e(h,{size:"48",color:"white"},{default:s(()=>[...t[14]||(t[14]=[v("mdi-trending-up",-1)])]),_:1})]),a("div",null,[a("div",St," €"+c(u.averageOrderValue.toFixed(2)),1),t[15]||(t[15]=a("div",{class:"text-caption white--text opacity-8"},"Avg. Order Value",-1)),a("div",At," +"+c(u.aovGrowth)+"% from last period ",1)])])]),_:1})]),_:1})]),_:1}),e(n,{class:"mb-6"},{default:s(()=>[e(i,{cols:"12",lg:"8"},{default:s(()=>[e(m,{class:"dashboard-card pa-6"},{default:s(()=>[e(g,{class:"d-flex align-center justify-space-between"},{default:s(()=>[t[16]||(t[16]=a("div",null,[a("h2",{class:"text-h5 font-weight-bold mb-1"},"Revenue Trend"),a("p",{class:"text-body-2 text-medium-emphasis mb-0"},"Daily revenue over selected period")],-1)),e(j,{modelValue:L.value,"onUpdate:modelValue":t[4]||(t[4]=l=>L.value=l),items:z.value,density:"compact",variant:"outlined",class:"w-auto"},null,8,["modelValue","items"])]),_:1}),e(b,null,{default:s(()=>[a("div",Tt,[e(x(G),{data:C.value,options:E},null,8,["data"])])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12",lg:"4"},{default:s(()=>[e(m,{class:"dashboard-card pa-6"},{default:s(()=>[e(g,null,{default:s(()=>[...t[17]||(t[17]=[a("h2",{class:"text-h6 font-weight-bold mb-1"},"Top Products",-1),a("p",{class:"text-caption text-medium-emphasis mb-0"},"By revenue",-1)])]),_:1}),e(b,null,{default:s(()=>[(T(!0),A(rt,null,ct(_.value,l=>(T(),A("div",{key:l.name,class:"mb-4"},[a("div",Lt,[a("div",Rt,[a("div",Pt,c(l.name),1),a("div",jt,c(l.quantity_sold)+" sold",1)]),a("div",Gt,[a("div",Ft,"€"+c(l.revenue.toFixed(0)),1)])]),e(Y,{value:_.value.length>0?l.revenue/Math.max(..._.value.map(S=>S.revenue))*100:0,color:"primary",height:"4"},null,8,["value"])]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(n,null,{default:s(()=>[e(i,{cols:"12",md:"6"},{default:s(()=>[e(m,{class:"dashboard-card pa-6"},{default:s(()=>[e(g,null,{default:s(()=>[...t[18]||(t[18]=[a("h2",{class:"text-h6 font-weight-bold mb-1"},"Customer Acquisition",-1),a("p",{class:"text-caption text-medium-emphasis mb-0"},"New customers over time",-1)])]),_:1}),e(b,null,{default:s(()=>[a("div",zt,[e(x(G),{data:k.value,options:I},null,8,["data"])])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12",md:"6"},{default:s(()=>[e(m,{class:"dashboard-card pa-6"},{default:s(()=>[e(g,null,{default:s(()=>[...t[19]||(t[19]=[a("h2",{class:"text-h6 font-weight-bold mb-1"},"Order Status Distribution",-1),a("p",{class:"text-caption text-medium-emphasis mb-0"},"Current order statuses",-1)])]),_:1}),e(b,null,{default:s(()=>[a("div",Et,[e(x(st),{data:R.value,options:M},null,8,["data"])])]),_:1})]),_:1})]),_:1})]),_:1})])}}}),$t=ut(It,[["__scopeId","data-v-39e08648"]]);export{$t as default};
